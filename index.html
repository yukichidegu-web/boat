<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2連単 一点購入 最終判定</title>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f2f2f2;
  margin: 0;
  padding: 12px;
}
h1 {
  font-size: 18px;
  text-align: center;
}
.card {
  background: #fff;
  padding: 12px;
  margin-bottom: 10px;
  border-radius: 8px;
}
label {
  font-size: 13px;
  display: block;
  margin-top: 6px;
}
input, select {
  width: 100%;
  padding: 6px;
  font-size: 14px;
}
button {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  margin-top: 10px;
}
.result {
  font-size: 16px;
  font-weight: bold;
  text-align: center;
  margin-top: 10px;
}
.buy { color: green; }
.skip { color: red; }
.small {
  font-size: 12px;
  color: #666;
}
</style>
</head>
<body>

<h1>2連単 一点購入 判定</h1>

<div class="card">
  <label>開催場</label>
  <select id="place">
    <option value="">選択</option>
    <option>大村</option>
    <option>徳山</option>
    <option>芦屋</option>
    <option>下関</option>
    <option>常滑</option>
    <option>その他</option>
  </select>
</div>

<div class="card">
  <h3>展示上位3艇（ST）</h3>

  <label>①号艇 ST</label>
  <input id="st1" type="number" step="0.01">

  <label>②号艇 ST</label>
  <input id="st2" type="number" step="0.01">

  <label>③号艇 ST</label>
  <input id="st3" type="number" step="0.01">

  <label>1-2 オッズ</label>
  <input id="odds12" type="number" step="0.1">

  <label>1-3 オッズ</label>
  <input id="odds13" type="number" step="0.1">
</div>

<button onclick="judge()">判定する</button>

<div id="output" class="result"></div>

<script>
function judge() {

  const place = document.getElementById("place").value;
  const output = document.getElementById("output");

  const allowedPlaces = ["大村","徳山","芦屋","下関","常滑"];

  // 場チェック
  if (!allowedPlaces.includes(place)) {
    output.innerHTML = `<div class="skip">SKIP<br>対象外の開催場</div>`;
    return;
  }

  // 場別 想定的中率
  let hitRate = 0.30;
  if (place === "大村") hitRate = 0.32;
  if (place === "徳山") hitRate = 0.30;
  if (place === "芦屋") hitRate = 0.30;
  if (place === "下関") hitRate = 0.28;
  if (place === "常滑") hitRate = 0.27;

  const st1 = parseFloat(document.getElementById("st1").value);
  const st2 = parseFloat(document.getElementById("st2").value);
  const st3 = parseFloat(document.getElementById("st3").value);
  const odds12 = parseFloat(document.getElementById("odds12").value);
  const odds13 = parseFloat(document.getElementById("odds13").value);

  // 軸決定（ST差0.03）
  let axis = 1;
  if (st2 + 0.03 < st1) axis = 2;
  if (st3 + 0.03 < Math.min(st1, st2)) axis = 3;

  // 今回は1号艇軸のみ許可
  if (axis !== 1) {
    output.innerHTML = `<div class="skip">SKIP<br>1号艇が軸にならず</div>`;
    return;
  }

  // 相手決定（オッズが高い方）
  let bet = "";
  let odds = 0;

  if (odds13 > odds12) {
    bet = "1-3";
    odds = odds13;
  } else {
    bet = "1-2";
    odds = odds12;
  }

  // 期待値計算
  const ev = hitRate * odds;

  if (odds >= 3.0 && ev >= 1.0) {
    output.innerHTML =
      `<div class="buy">
        BUY<br>
        ${bet}<br>
        オッズ ${odds}<br>
        期待値 ${ev.toFixed(2)}<br>
        <span class="small">想定的中率 ${Math.round(hitRate*100)}%</span>
      </div>`;
  } else {
    output.innerHTML =
      `<div class="skip">
        SKIP<br>
        オッズ or 期待値不足<br>
        <span class="small">想定的中率 ${Math.round(hitRate*100)}%</span>
      </div>`;
  }
}
</script>

</body>
</html>