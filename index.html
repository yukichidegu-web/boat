<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>ãƒœãƒ¼ãƒˆãƒ¬ãƒ¼ã‚¹ å®‰å®šå ´ãƒ­ãƒ¼ãƒ† å®Œå…¨ç‰ˆ</title>

<style>
body{
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:#f2f2f2;
  margin:0;
  padding:10px;
}
.container{
  max-width:420px;
  margin:auto;
  background:#fff;
  padding:15px;
  border-radius:14px;
}
h2{text-align:center;margin:6px 0;}
select,input,button{
  width:100%;
  padding:12px;
  font-size:16px;
  margin-top:8px;
}
button{font-weight:bold;}
.modeBtn{background:#e8e8e8;}
.result{
  margin-top:14px;
  padding:14px;
  border-radius:12px;
  white-space:pre-line;
}
.good{background:#d9f6d9;}
.bad{background:#f6d9d9;}
.log{
  margin-top:10px;
  font-size:14px;
  white-space:pre-line;
}
</style>
</head>

<body>
<div class="container">

<h2>ğŸš¤ å®‰å®šå ´ãƒ­ãƒ¼ãƒ† å®Œå…¨ç‰ˆ</h2>

<!-- ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ -->
<button class="modeBtn" onclick="toggleMikuni()">ä¸‰å›½å°‚ç”¨ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿</button>

<!-- é–‹å‚¬å ´æ‰€ -->
<select id="place">
  <option value="">é–‹å‚¬å ´æ‰€ã‚’é¸æŠ</option>
  <option value="ä¸‰å›½">ä¸‰å›½</option>
  <option value="å¤§æ‘">å¤§æ‘</option>
  <option value="ä½ä¹‹æ±Ÿ">ä½ä¹‹æ±Ÿ</option>
  <option value="æµœåæ¹–">æµœåæ¹–</option>
</select>

<h3>å±•ç¤ºã‚¿ã‚¤ãƒ </h3>
<input type="number" inputmode="decimal" id="fast" placeholder="æœ€é€Ÿå±•ç¤º">
<input type="number" inputmode="decimal" id="second" placeholder="2ç•ªæ‰‹å±•ç¤º">

<h3>ã‚ªãƒƒã‚ºï¼ˆ2é€£å˜ï¼‰</h3>
<input type="number" inputmode="decimal" id="o12" placeholder="1â†’2">
<input type="number" inputmode="decimal" id="o13" placeholder="1â†’3">

<button onclick="judge()">åˆ¤å®š</button>

<div id="result" class="result"></div>

<!-- çµæœè¨˜éŒ² -->
<button onclick="record(true)">âœ… çš„ä¸­</button>
<button onclick="record(false)">âŒ ä¸çš„ä¸­</button>
<button onclick="clearAll()">ã‚¯ãƒªã‚¢</button>

<div id="log" class="log"></div>

</div>

<script>
const stablePlaces=["ä¸‰å›½","å¤§æ‘","ä½ä¹‹æ±Ÿ","æµœåæ¹–"];
let mikuniOnly=false;
let lastJudge=null;

let stats={
  total:0,
  count:0,
  places:{
    ä¸‰å›½:0, å¤§æ‘:0, ä½ä¹‹æ±Ÿ:0, æµœåæ¹–:0
  }
};

function toggleMikuni(){
  mikuniOnly=!mikuniOnly;
  const p=document.getElementById("place");
  if(mikuniOnly){
    p.value="ä¸‰å›½";
    p.disabled=true;
    show("â–¶ ä¸‰å›½å°‚ç”¨ãƒ¢ãƒ¼ãƒ‰ON",true);
  }else{
    p.disabled=false;
    show("â–¶ ä¸‰å›½å°‚ç”¨ãƒ¢ãƒ¼ãƒ‰OFF",true);
  }
}

function judge(){
  const place=document.getElementById("place").value;
  if(!stablePlaces.includes(place)){
    show("âŒ å¯¾è±¡å¤–é–‹å‚¬",false);return;
  }

  const f=parseFloat(fast.value);
  const s=parseFloat(second.value);
  if(isNaN(f)||isNaN(s)){
    show("âŒ å±•ç¤ºæœªå…¥åŠ›",false);return;
  }

  const diff=s-f;
  if(diff<0.05){
    show("âŒ å±•ç¤ºå·®ä¸è¶³",false);return;
  }

  const o12v=parseFloat(o12.value);
  const o13v=parseFloat(o13.value);
  if(isNaN(o12v)||isNaN(o13v)){
    show("âŒ ã‚ªãƒƒã‚ºæœªå…¥åŠ›",false);return;
  }

  const high=Math.max(o12v,o13v);
  const low=Math.min(o12v,o13v);
  if(high<7.0){
    show("âŒ ã‚ªãƒƒã‚ºä¸è¶³",false);return;
  }
  if(low<2.0){
    show("âŒ äººæ°—åã‚Šéå¤š",false);return;
  }

  const bet=o12v>o13v?"1â†’2":"1â†’3";
  lastJudge={place:place,odds:high};

  show(
`âœ… è²·ã„OK

é–‹å‚¬ï¼š${place}
å±•ç¤ºå·®ï¼š${diff.toFixed(2)}
è²·ã„ç›®ï¼š${bet}
ã‚ªãƒƒã‚ºï¼š${high}`,true);
}

function record(hit){
  if(!lastJudge){
    show("âŒ åˆ¤å®šãŒå…ˆ",false);return;
  }
  stats.count++;
  const unit=1000;
  const result=hit ? unit*(lastJudge.odds-1) : -unit;
  stats.total+=result;
  stats.places[lastJudge.place]+=result;
  lastJudge=null;
  updateLog();
}

function updateLog(){
  let text=`ğŸ“Š æœˆé–“åæ”¯\nåˆè¨ˆï¼š${stats.total.toFixed(0)}å††\nä»¶æ•°ï¼š${stats.count}\n\nğŸŸ é–‹å‚¬åˆ¥`;
  for(const p in stats.places){
    text+=`\n${p}ï¼š${stats.places[p].toFixed(0)}å††`;
  }
  document.getElementById("log").textContent=text;
}

function clearAll(){
  document.querySelectorAll("input").forEach(i=>i.value="");
  document.getElementById("result").textContent="";
  document.getElementById("result").className="result";
}

function show(msg,ok){
  const r=document.getElementById("result");
  r.textContent=msg;
  r.className=ok?"result good":"result bad";
}
</script>

</body>
</html>